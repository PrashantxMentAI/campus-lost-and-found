{
  "entities": {
    "LostFoundItem": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "LostFoundItem",
      "type": "object",
      "description": "Represents a lost or found item submitted by a user.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the LostFoundItem entity."
        },
        "userId": {
          "type": "string",
          "description": "The UID of the user who submitted the item."
        },
        "type": {
          "type": "string",
          "description": "Type of the item (Lost or Found)."
        },
        "name": {
          "type": "string",
          "description": "Name of the item."
        },
        "location": {
          "type": "string",
          "description": "Location where the item was lost or found."
        },
        "contact": {
          "type": "string",
          "description": "Contact information of the user who submitted the item."
        },
        "category": {
          "type": "string",
          "description": "Category of the item (e.g., Mobile, Wallet, ID Card, Keys, Bag, Other). This is automatically categorized by AI."
        },
        "description": {
          "type": "string",
          "description": "A more detailed description of the item."
        },
        "createdAt": {
          "type": "object",
          "description": "The date and time the item was submitted."
        },
        "photos": {
          "type": "array",
          "description": "URLs to the photos of the item.",
          "items": {
            "type": "string"
          }
        },
        "status": {
          "type": "string",
          "description": "The current status of the item.",
          "enum": ["Open", "Resolved"]
        },
        "resolvedAt": {
            "type": "object",
            "description": "The date and time the item was resolved."
        },
        "claimerContact": {
            "type": "string",
            "description": "Contact information of the person who claimed the item."
        }
      },
      "required": [
        "userId",
        "type",
        "name",
        "location",
        "contact",
        "category",
        "description",
        "createdAt",
        "status"
      ]
    },
    "ItemQuery": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "ItemQuery",
      "type": "object",
      "description": "Represents a query or comment on a LostFoundItem.",
      "properties": {
        "id": {
          "type": "string"
        },
        "text": {
          "type": "string"
        },
        "userId": {
          "type": "string"
        },
        "userName": {
          "type": "string"
        },
        "createdAt": {
          "type": "object"
        }
      },
      "required": ["text", "userId", "userName", "createdAt"]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/lost_found_items/{lostFoundItemId}",
        "definition": {
          "entityName": "LostFoundItem",
          "schema": {
            "$ref": "#/backend/entities/LostFoundItem"
          },
          "description": "Collection of lost and found items. Since no auth is required, all reads and writes are public. ",
          "params": [
            {
              "name": "lostFoundItemId",
              "description": "Unique identifier for the LostFoundItem."
            }
          ]
        }
      },
      {
        "path": "/lost_found_items/{lostFoundItemId}/queries/{queryId}",
        "definition": {
          "entityName": "ItemQuery",
          "schema": {
            "$ref": "#/backend/entities/ItemQuery"
          },
          "description": "Subcollection for queries on a specific lost and found item."
        }
      }
    ],
    "reasoning": "Given the requirements for a simple \"Lost and Found Board\" application with no authentication, the most straightforward and secure Firestore structure is to use a single collection, `/lost_found_items`. Since there is no user authentication, all items are essentially public. To support the AI-powered auto-categorization, the `category` field is included within the `LostFoundItem` entity. A semantic search is best handled outside of Firestore rules and queries, so the database structure does not directly address it. This design achieves Authorization Independence because no rules depend on any other document. There is no authentication, so all reads and writes are public, and there is no need for denormalization. This trivially satisfies the QAP because `list` operations are permitted for everyone."
  }
}
